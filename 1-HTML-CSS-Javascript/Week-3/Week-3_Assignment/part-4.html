<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Week 3 Part 1</title>
    <style>
        div {
            margin-top: 5%;
            height: 500px;
            width: 500px;
            position: absolute;
        }

        img {
            position: absolute;
        }

        .leftside {

        }

        .rightside {
            border-left: 1px solid black;
            left: 501px;
        }
    </style>


</head>
<body onload="generateFaces()">
<h1>Matching Game</h1>

<p>Click on the extra smiling face on the left</p>
<h1>Score: </h1>  <H1 id="score"></H1>

<div class="leftside"
     id="leftside">
    <!-- TODO - Make a score
            1. based on number of faces vs time it took
                Example - 20 faces * 100 / time
    -->

</div>
<div class="rightside"
     id="rightside">

</div>

<script type="text/javascript">
    var numberOfFaces = 5;

    var score = (numberOfFaces - 5) * 1000;

    function generateFaces() {
        var leftDiv = document.getElementById('leftside');
        var rightDiv = document.getElementById('rightside');

        while (leftDiv.firstChild){
            leftDiv.removeChild(leftDiv.firstChild);
        }
        while (rightDiv.firstChild){
            rightDiv.removeChild(rightDiv.firstChild);
        }

        var startTime;
        startTime = Date.now();// Start timer...

        // right and left divs
        var theLeftSide = document.getElementById("leftside");

        for (var i = 0; i < numberOfFaces; i++) { // generate the faces in the div
            var top = Math.floor(Math.random() * 400);
            var left = Math.floor(Math.random() * 400);
            var img = document.createElement('img');
            img.src = "smile.png";
            img.style.left = left + 'px';
            img.style.top = top + "px";
            theLeftSide.appendChild(img);
        }

        // clone leftside to right side
        leftSideImages = theLeftSide.cloneNode(true);

        leftSideImages.id = "leftclone";

        theRightSide = document.getElementById("rightside");

        leftLastChild = leftSideImages.lastChild;

        leftSideImages.removeChild(leftLastChild); //remove 1 face before copying

        theRightSide.appendChild(leftSideImages);// add left side div to right side

        var theBody = document.getElementsByTagName("body")[0];

        theLeftSide.lastChild.onclick = function nextLevel(event) { // add faces when last child is clicked

            event.stopPropagation();
            numberOfFaces += 5;
// FIXME - fix numbers on score
            var currentTurnScore;
            var stopTime = Date.now();// Stop timer
            var totalTime = (stopTime - startTime) / 100;
            currentTurnScore =  5  / totalTime;
            score = score + currentTurnScore;
            score = score * 100;
            console.log("I am current score.  "  + currentTurnScore + " And I am total score: " + score);
            //  keep score
            document.getElementById("score").innerHTML=score;

            generateFaces();
        }
        theBody.onclick = function gameOver() {// If wrong face is chosen

            alert("Game Over!");

            theBody.onclick = null;

            theLeftSide.lastChild.onclick = null;

        };
    }


</script>
</body>
</html>